# CLAUDE.md

必ず日本語で返答してください
記述には淡々と事実のみを記載するようにしてください
不必要な絵文字や修飾語は使わないこと
コミットメッセージは最小限かつ簡潔に記載すること

## Project Overview

ScreenTranslatorをForkし機能向上を目指す

## 実装記録

### 2025-10-19: OCR精度向上とビルド環境構築

#### OCR前処理の改善 (src/ocr/tesseract.cpp)
- 10pxの白色ボーダー追加
- Deskewing（傾き補正）実装
- ノイズ低減（Gaussian blur）
- 解像度を500 DPIから300 DPIに最適化
- Sauvola適応的二値化を実装（Otsu法をフォールバックとして維持）

#### OCRエンジン設定の最適化
- Tesseract OEM_LSTM_ONLYモードに変更
- 複数PSMモード（AUTO, SINGLE_BLOCK, SPARSE_TEXT）での認識実施
- 信頼度ベースの結果選択（85%で早期終了）

#### GitHub Actionsビルド環境
- Windows 64bit: ビルド成功（5分36秒）
- Linux: AppImageビルド成功（4分16秒）
- 成果物: ScreenTranslator-3.3.0-win64.zip, ScreenTranslator-3.3.0.AppImage
- ビルド最適化: Tesseract LTO無効化、Leptonica不要機能削除

#### 技術スタック
- Tesseract 5.2.0 (OEM_LSTM_ONLY)
- Leptonica 1.82.0
- Qt 5.15.2

## コミット規律

- 大きくて頻度の低いコミットよりも、小さくて頻繁なコミットを使用します
- 更新後エラーがないこと場合コミットを行ってください

## コード品質基準

- 重複を徹底的に排除します
- 命名と構造を通して意図を明確に表現します
- 依存関係を明示的にします
- メソッドを小さく、単一の責務に焦点を当てます
- 状態と副作用を最小化します
- 可能な限り最もシンプルなソリューションを使用します
- 定数のハードコーディングは可能な限り行わない
- 一時的な機能の無効化等でバグを見えなくするのではなく,長期的な視野に立って補修すること

# important-instruction-reminders
- 指示されたことだけを実行してください
- 目的を達成するために絶対必要な場合を除き、ファイルを作成しないでください
- 新規ファイルを作成するよりも既存ファイルを編集することを常に優先してください
- ドキュメントファイル (*.md) を積極的に作成しないでください
- ユーザーからの指示でのみドキュメントファイルを作成してください

# UI/UX design-principles
- 余計な装飾や演出は排除すること
- 機能以外に余計なものは必要ない
- シンプルで実用的なデザインを心がける
- ユーザビリティを最優先とする
